#　数据模型设计

## 嵌入 (非规范化， 反范式)

1. 嵌入式数据模型允许应用程序将相关的信息片段存储在同一数据库记录中
2. 更少的查询和更新来完成常见操作
3. 实体之间具有“包含”关系
4. 实体之间具有一对多的关系
5. 访问嵌入文档中的数据
   1. 点表示法

## 规范化数据模型

1. 更复杂的多对多关系
2. 大型分层数据集进行建模
3. 嵌入会导致数据重复但不会提供足够的读取性能优势来超过重复的影响时

###

1. 写入操作在`单个文档`级别上是`原子操作`
2. \_id 生成一个唯一的 12 字节 ObjectId_id 。此外，MongoDB 总是索引该\_id 字段。对于较小的文档，这可能会占用大量空间。

###

1. 拆分数据时，最常访问的数据部分应该放在应用程序首先加载的集合中
2. 一对一关系
   1. 产品评论列表,用户访问产品页面时，应用程序会加载最近的 10 条评论
   2. 拆分为两个集合，而不是将所有评论与产品一起存储
   3. product 集合存储有关每个产品的信息，包括该产品的 10 条最新评论
   4. review 集合存储所有评论。每条评论都包含对其所针对的产品的引用
3. 博客文章的评论，默认情况下您只想显示最新或评分最高的评论
4. 电影中的演员，默认情况下您只想显示具有最大角色的演员
5. 一对多关系 
   1. 
