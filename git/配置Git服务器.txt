//  配置Git服务器


创建SSH密钥对

首先，我们需要产生SSH密钥对。 这里我们使用git bash来得到ssh密钥对

    $ ssh-keygen -t rsa -C "dabu@gmail.com"

    Generating public/private rsa key pair.
    Enter file in which to save the key (/c/Users/AlexY/.ssh/id_rsa):  //设置密钥保存的位置，我们直接回车，使用默认的
    Enter passphrase (empty for no passphrase):         //输入密码
    名字叫id_rsa（私钥） 和id_rsa.pub （公钥）。

设置Git用户
    
    groupadd git
    adduser git -g git  //添加一个叫git的用户来处理仓库：
    
    passwd git          //然后为这个账户设置密码：

安装git
    1)  yum install git
        sudo apt-get install git
    2)

创建证书登录
    1)公钥id_rsa.pub文件,导入到/home/git/.ssh/authorized_keys文件里，一行一个
    2) .ssh目录一定要有执行权限， 700
        chmod 0700 .ssh
    3） chmod 0600 authorized_keys
    4） /etc/ssh/sshd_config 里，下面的#去掉
        RSAAuthentication yes
        PubkeyAuthentication yes
        AuthorizedKeysFile	.ssh/authorized_keys

初始化Git仓库
    1)  $ cd /home
        $ mkdir gitwx
        $ chown git:git gitwx/
        $ cd gitwx

        $ git init --bare wxdc.git
            Initialized empty Git repository in /home/gitwx/wxdc.git/
        
        chown -R git:git wxdt.git   //把owner改为git
       
 禁用shell登录
    1)编辑/etc/passwd文件
        git:x:1001:1001:,,,:/home/git:/usr/bin/git-shell

远程
    git clone git@www.bosstg.cn:/gitwx/wxdc.git
    
    假设windows上已经有个本地仓库，并且与别名叫origin的远程仓库进行了关联，那么，我们只需要将origin所指向的远程仓库的链接改为我们刚搭建的git服务器：
git remote set-url origin git@git.dabu.info:my-project.git
如果是本地还没有仓库，可以执行下面的命令，并将其与远程仓库进行关联：
git init && git remote add origin  git@git.dabu.info:my-project.git
将本地的仓库内容推送到远程仓库：
git push -u origin master

    然后看看能不能免密码登陆：
ssh  git@www.bosstg.cn

注意：
    1.windows7 下git要用windows PowerShell 5.0, 升级Win7AndW2K8R2-KB3134760-x64
    2.进行ssh登录时，出现：”Agent admitted failure to sign using the key“ .
    执行： $ssh-add     // 强行将私钥 加进来。
